{% extends 'base.html' %}

{% block title %}Farewell Calculator - Funeral Services{% endblock %}

{% block content %}
<section class="section">
    <div class="container">
        <div class="row">
            <div class="col s12 center-align">
                <h2>Farewell Calculator</h2>
                <p class="flow-text">Get an estimate for funeral service costs based on your preferences</p>
            </div>
        </div>
        
        <div class="row">
            <div class="col s12 l8">
                <div class="card">
                    <div class="card-content">
                        <h4>Service Options</h4>
                        <p>Select your preferences below to calculate an estimated cost for the funeral service.</p>
                        
                        <form method="post" id="calculator-form">
                            {% csrf_token %}
                            <div class="row">
                                <div class="input-field col s12 m6">
                                    {{ form.service_package }}
                                    <label>Service Package</label>
                                </div>
                                
                                <div class="input-field col s12 m6">
                                    {{ form.venue_type }}
                                    <label>Venue Type</label>
                                </div>
                                
                                <div class="col s12">
                                    <h5>Additional Services</h5>
                                    <p>Select any additional services you would like to include:</p>
                                </div>
                                
                                <div class="col s12 m6">
                                    <p>
                                        <label>
                                            {{ form.flowers }}
                                            <span>Floral Arrangements (+$200)</span>
                                        </label>
                                    </p>
                                </div>
                                
                                <div class="col s12 m6">
                                    <p>
                                        <label>
                                            {{ form.music }}
                                            <span>Music Services (+$300)</span>
                                        </label>
                                    </p>
                                </div>
                                
                                <div class="col s12 m6">
                                    <p>
                                        <label>
                                            {{ form.catering }}
                                            <span>Catering Services (+$800)</span>
                                        </label>
                                    </p>
                                </div>
                                
                                <div class="col s12 m6">
                                    <p>
                                        <label>
                                            {{ form.transportation }}
                                            <span>Transportation (+$400)</span>
                                        </label>
                                    </p>
                                </div>
                                
                                <div class="col s12">
                                    <button type="submit" class="btn-large waves-effect waves-light">
                                        <i class="material-icons left">calculate</i>Calculate Cost
                                    </button>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
                
                <!-- Package Details -->
                <div class="card">
                    <div class="card-content">
                        <h4>Service Package Details</h4>
                        <div class="row">
                            <div class="col s12 m4">
                                <div class="package-detail">
                                    <h5 style="color: var(--gold);">Basic Service - $2,500</h5>
                                    <ul class="collection">
                                        <li class="collection-item">Professional services</li>
                                        <li class="collection-item">Basic casket or urn</li>
                                        <li class="collection-item">Preparation of deceased</li>
                                        <li class="collection-item">Basic memorial service</li>
                                        <li class="collection-item">Death certificates</li>
                                    </ul>
                                </div>
                            </div>
                            <div class="col s12 m4">
                                <div class="package-detail">
                                    <h5 style="color: var(--gold);">Standard Service - $4,000</h5>
                                    <ul class="collection">
                                        <li class="collection-item">All Basic Service features</li>
                                        <li class="collection-item">Upgraded casket or urn</li>
                                        <li class="collection-item">Viewing/visitation</li>
                                        <li class="collection-item">Memorial video</li>
                                        <li class="collection-item">Guest book</li>
                                        <li class="collection-item">Basic flowers</li>
                                    </ul>
                                </div>
                            </div>
                            <div class="col s12 m4">
                                <div class="package-detail">
                                    <h5 style="color: var(--gold);">Premium Service - $6,500</h5>
                                    <ul class="collection">
                                        <li class="collection-item">All Standard Service features</li>
                                        <li class="collection-item">Premium casket or urn</li>
                                        <li class="collection-item">Extended viewing hours</li>
                                        <li class="collection-item">Professional photography</li>
                                        <li class="collection-item">Memorial website</li>
                                        <li class="collection-item">Upgraded flowers</li>
                                        <li class="collection-item">Reception coordination</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Cost Summary Sidebar -->
            <div class="col s12 l4">
                {% if total_cost %}
                <div class="card" style="position: sticky; top: 80px;">
                    <div class="card-content center-align">
                        <h4 style="color: var(--gold);">Cost Estimate</h4>
                        <div class="divider" style="margin: 20px 0;"></div>
                        <h2 style="color: var(--gold);">${{ total_cost|floatformat:0 }}</h2>
                        <p>Estimated Total Cost</p>
                        
                        <div class="divider" style="margin: 20px 0;"></div>
                        
                        <div class="row">
                            <div class="col s6">
                                <button onclick="window.print()" class="btn btn-outline waves-effect waves-light">
                                    <i class="material-icons left">print</i>Print
                                </button>
                            </div>
                            <div class="col s6">
                                <a href="{% url 'arrange_service' %}" class="btn waves-effect waves-light">
                                    <i class="material-icons left">event_note</i>Arrange
                                </a>
                            </div>
                        </div>
                        
                        <div class="divider" style="margin: 20px 0;"></div>
                        
                        <p class="grey-text">
                            <i class="material-icons tiny">info</i> 
                            This is an estimate only. Final costs may vary based on specific requirements and selections.
                        </p>
                    </div>
                </div>
                {% else %}
                <div class="card">
                    <div class="card-content center-align">
                        <h5>Cost Estimate</h5>
                        <p>Select your preferences to see an estimated cost for the funeral service.</p>
                        <i class="material-icons large grey-text">calculate</i>
                    </div>
                </div>
                {% endif %}
                
                <div class="card">
                    <div class="card-content">
                        <h5>Need Help?</h5>
                        <p>Our team is here to help you understand your options and create a meaningful service within your budget.</p>
                        <a href="{% url 'contact' %}" class="btn btn-outline waves-effect waves-light">Contact Us</a>
                        
                        <div class="divider" style="margin: 20px 0;"></div>
                        
                        <h6>Call Us Directly</h6>
                        <h5 style="color: var(--gold);">(09) 123-4567</h5>
                        <p class="grey-text">Available 24/7</p>
                    </div>
                </div>
                
                <div class="card">
                    <div class="card-content">
                        <h5>Payment Options</h5>
                        <ul class="collection">
                            <li class="collection-item">
                                <i class="material-icons left">credit_card</i>Credit Cards
                            </li>
                            <li class="collection-item">
                                <i class="material-icons left">account_balance</i>Bank Transfer
                            </li>
                            <li class="collection-item">
                                <i class="material-icons left">schedule</i>Payment Plans
                            </li>
                            <li class="collection-item">
                                <i class="material-icons left">security</i>Insurance Claims
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Additional Information -->
        <div class="row">
            <div class="col s12">
                <div class="card">
                    <div class="card-content">
                        <h4>Important Information</h4>
                        <div class="row">
                            <div class="col s12 m6">
                                <h6><i class="material-icons left">info</i>About Our Pricing</h6>
                                <p>Our transparent pricing ensures you understand all costs upfront. We believe in providing compassionate service without hidden fees or surprises.</p>
                            </div>
                            <div class="col s12 m6">
                                <h6><i class="material-icons left">payment</i>Payment Plans Available</h6>
                                <p>We understand that funeral costs can be a burden. We offer flexible payment plans to help make our services accessible to all families.</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<style>
    @media print {
        nav, footer, .btn, .sidenav-trigger {
            display: none !important;
        }
        
        .card {
            box-shadow: none !important;
            border: 1px solid #ccc;
        }
        
        body {
            background: white !important;
        }
    }
</style>
{% endblock %}
